apply plugin: 'java'

repositories {
	flatDir {
		dirs 'libs'
	}
}

dependencies {
	compile name: 'BroPalsGameLibrary', version: '1.0'
}

task wrapper(type: Wrapper) {
	gradleVersion = '2.2'
}

jar {
	manifest {
		attributes("Main-Class": "com.basementcrew.ld32.ApplicationMain")
	}
	from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
}

task buildLibs(type: Exec) {
	workingDir '../BroPalsGameLibrary'
	commandLine 'cmd', '/c', 'gradle', 'build'
}

task updateLibs(type: Copy) {
	dependsOn buildLibs
	from '../BroPalsGameLibrary/build/libs'
	into 'libs'
	include '**.*'
}